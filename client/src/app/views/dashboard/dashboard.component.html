<div class="row">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header" role="button" [routerLink]="'/seasons/' + getSeasonNumber(currentSeasonId)">
                <div class="d-flex justify-content-between align-items-center flex-column flex-md-row">
                    <h3 class="card-title">
                        <img class="mr-2" style="width: 1.333rem;" src="assets/img/gauntlet_icon.png" />
                        Gauntlet Season {{getSeasonNumber(currentSeasonId)}}
                    </h3>
                    <span class="badge badge-secondary mt-2 mt-md-0">End at {{databaseService.allSeasons[currentSeasonId].endAt| date:'YYYY/MM/dd HH:mm'}}</span>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table text-nowrap table-sm table-striped table-hover mb-0">
                        <thead>
                            <tr>
                                <th style="width: 14px">Rank</th>
                                <th>Guild</th>
                                <th style="width: 100px">
                                    <div class="text-center">Level</div>
                                </th>
                                <th style="width: 100px">
                                    <div class="text-center">Time left</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let leaderboardItem of databaseService.allSeasons[currentSeasonId].leaderboard; index as index;" [class.text-info]="leaderboardItem.guildNameplate === userGuildTag" [routerLink]="'/guilds/' + leaderboardItem.guildNameplate" role="button">
                                <ng-container *ngIf="index < 5 || leaderboardItem.guildNameplate === userGuildTag">
                                    <td class="text-center">{{index + 1}}.</td>
                                    <td>
                                        <app-guild-name [guildName]="leaderboardItem.guildName" [guildNameplate]="leaderboardItem.guildNameplate"></app-guild-name>
                                    </td>
                                    <td>
                                        <div class="text-center">{{leaderboardItem.level}}</div>
                                    </td>
                                    <td>
                                        <div class="text-center">{{convertRemainingSec(leaderboardItem.remainingSec)}}</div>
                                    </td>
                                </ng-container>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer d-flex">
                <span class="badge badge-secondary ml-auto">Last updated at {{databaseService.allSeasons[currentSeasonId].lastUpdated | date:'YYYY/MM/dd HH:mm'}}</span>
            </div>
        </div>
    </div>
    <div class="col-lg-6" *ngIf="databaseService.currentTrial">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center flex-column flex-md-row">
                    <h3 class="card-title flex-grow-1">
                        <img class="mr-1" style="width: 3rem; margin: -0.5rem;" [src]="trialsService.getBehemothImgUrl(trialsService.getBehemothIdFromWeek(trialsService.getCurrentWeek()))" [title]="trialsService.getBehemothName(trialsService.getBehemothIdFromWeek(trialsService.getCurrentWeek()))" />
                        Solo Trial
                    </h3>
                    <div class="d-flex justify-content-between align-items-center flex-column flex-md-row">
                        <button class="btn btn-sm btn-primary mt-2 mt-md-0 mr-0 mr-md-2" routerLink="/trials/current">View all</button>
                        <span class="badge badge-secondary mt-2 mt-md-0">End at {{trialsService.getWeekStartAndEnd(trialsService.getCurrentWeek())[1] |date:'YYYY/MM/dd HH:mm'}}</span>
                    </div>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive" style="max-height: 70vh;">
                    <table class="table text-nowrap table-sm table-striped table-hover mb-0">
                        <thead>
                            <tr>
                                <th style="width: 14px;">Rank</th>
                                <th style="width: 6rem;" class="text-center">Time</th>
                                <th>Player</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let player of databaseService.currentTrial.solo['all'].slice(0, 5); let index = index" [routerLink]="'/players/' + player.playerName" role="button" [class.text-info]="player.playerName === userPlayerName">
                                <td style="vertical-align: middle" class="text-center">
                                    {{index + 1}}.
                                </td>
                                <td style="vertical-align: middle; width: 6rem; cursor: default;" class="text-center" [title]="trialsService.convertTrialTime(player.completionTime, true)">
                                    {{trialsService.convertTrialTime(player.completionTime, trialDecimals)}}
                                </td>
                                <td style="vertical-align: middle;">
                                    <img class="ml-1" style="width: 2rem; margin: -0.1rem;" [src]="trialsService.getWeaponImgUrl(player.weapon)">
                                    <img class="ml-1" style="width: 2rem; margin: -0.1rem;" *ngIf="player.playerRoleId" [src]="trialsService.getOmniImgUrl(player.playerRoleId)" />
                                    <span class="mx-2">
                                        <app-player-name [playerName]="player.playerName"></app-player-name>
                                    </span>
                                    <img class="ml-1" style="width: 2rem; margin: -0.1rem;" *ngIf="player.playerRoleId" [src]="trialsService.getPlatformImgUrl(player.platform)" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer d-flex">
                <span class="badge badge-secondary ml-auto">Last updated at {{databaseService.currentTrial.lastUpdated | date:'YYYY/MM/dd HH:mm'}}</span>
            </div>
        </div>
    </div>
    <div class="col" *ngIf="databaseService.currentTrial">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-between align-items-center flex-column flex-md-row">
                    <h3 class="card-title flex-grow-1">
                        <img class="mr-1" style="width: 3rem; margin: -0.5rem;" [src]="trialsService.getBehemothImgUrl(trialsService.getBehemothIdFromWeek(trialsService.getCurrentWeek()))" [title]="trialsService.getBehemothName(trialsService.getBehemothIdFromWeek(trialsService.getCurrentWeek()))" />
                        Group Trial
                    </h3>
                    <div class="d-flex justify-content-between align-items-center flex-column flex-md-row"></div>
                    <button class="btn btn-sm btn-primary mt-2 mt-md-0 mr-0 mr-md-2" routerLink="/trials/current">View all</button>
                    <span class="badge badge-secondary mt-2 mt-md-0">End at {{trialsService.getWeekStartAndEnd(trialsService.getCurrentWeek())[1] |date:'YYYY/MM/dd HH:mm'}}</span>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive" style="max-height: 70vh;">
                    <table class="table text-nowrap table-sm table-striped table-hover mb-0">
                        <thead>
                            <tr>
                                <th style="width: 2rem;" class="text-center">Rank</th>
                                <th style="width: 6rem;" class="text-center">Time</th>
                                <th>Player</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let group of databaseService.currentTrial.group.slice(0, 5); let index = index">
                                <td [class.text-info]="souldHighlightGroupLine(group)" style="vertical-align: middle; width: 2rem;" class="text-center">
                                    {{index + 1}}.
                                </td>
                                <td [class.text-info]="souldHighlightGroupLine(group)" style="vertical-align: middle; width: 6rem; cursor: default;" class="text-center" [title]="trialsService.convertTrialTime(group.completionTime, true)">
                                    {{trialsService.convertTrialTime(group.completionTime, trialDecimals)}}
                                </td>
                                <td style="vertical-align: middle;">
                                    <div class="d-none d-md-block">
                                        <div style="display: grid; grid-template-columns: max-content 1fr; row-gap: 0.3rem; column-gap: 1rem;">
                                            <div [class.text-info]="player.playerName === userPlayerName" [routerLink]="'/players/' + player.playerName" role="button" *ngFor="let player of group.entries">
                                                <img class="ml-1" style="width: 2rem; margin: -0.1rem;" [src]="trialsService.getWeaponImgUrl(player.weapon)" />
                                                <img class="ml-1" style="width: 2rem; margin: -0.1rem;" *ngIf="player.playerRoleId" [src]="trialsService.getOmniImgUrl(player.playerRoleId)" />
                                                <span class="mx-2">
                                                    <app-player-name [playerName]="player.playerName"></app-player-name>
                                                </span>
                                                <img class="ml-1" style="width: 2rem; margin: -0.1rem;" *ngIf="player.playerRoleId" [src]="trialsService.getPlatformImgUrl(player.platform)" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-md-none">
                                        <div style="display: grid; grid-template-columns: 1fr; row-gap: 0.3rem; column-gap: 1rem;">
                                            <div [class.text-info]="player.playerName === userPlayerName" [routerLink]="'/players/' + player.playerName" role="button" *ngFor="let player of group.entries">
                                                <img class="ml-1" style="width: 2rem; margin: -0.1rem;" [src]="trialsService.getWeaponImgUrl(player.weapon)" />
                                                <img class="ml-1" style="width: 2rem; margin: -0.1rem;" *ngIf="player.playerRoleId" [src]="trialsService.getOmniImgUrl(player.playerRoleId)" />
                                                <span class="mx-2">
                                                    <app-player-name [playerName]="player.playerName"></app-player-name>
                                                </span>
                                                <img class="ml-1" style="width: 2rem; margin: -0.1rem;" *ngIf="player.playerRoleId" [src]="trialsService.getPlatformImgUrl(player.platform)" />
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer d-flex">
                <span class="badge badge-secondary ml-auto">Last updated at {{databaseService.currentTrial.lastUpdated | date:'YYYY/MM/dd HH:mm'}}</span>
            </div>
        </div>
    </div>
</div>